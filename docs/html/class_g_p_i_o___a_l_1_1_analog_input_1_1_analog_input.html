<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GPIO_AL: GPIO_AL.AnalogInput.AnalogInput Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">GPIO_AL
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>GPIO_AL</b></li><li class="navelem"><b>AnalogInput</b></li><li class="navelem"><a class="el" href="class_g_p_i_o___a_l_1_1_analog_input_1_1_analog_input.html">AnalogInput</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_g_p_i_o___a_l_1_1_analog_input_1_1_analog_input-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">GPIO_AL.AnalogInput.AnalogInput Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Class to encapsulate analog input capabilities.  
 <a href="#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for GPIO_AL.AnalogInput.AnalogInput:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_g_p_i_o___a_l_1_1_analog_input_1_1_analog_input.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a20868137736d7c6d35126c6d32ed101b" id="r_a20868137736d7c6d35126c6d32ed101b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a20868137736d7c6d35126c6d32ed101b">__init__</a> (self, Union[int, str] channelOrPin, Optional[int] chipEnable=0, Optional[str] chip='MCP3008')</td></tr>
<tr class="memdesc:a20868137736d7c6d35126c6d32ed101b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor - initializes the class.  <br /></td></tr>
<tr class="separator:a20868137736d7c6d35126c6d32ed101b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a035d5b90329f5b24fa11d208a873884a" id="r_a035d5b90329f5b24fa11d208a873884a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a035d5b90329f5b24fa11d208a873884a">__del__</a> (self)</td></tr>
<tr class="memdesc:a035d5b90329f5b24fa11d208a873884a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor - only meaningful on the Raspberry Pi and potentially during Unit Tests on the Raspberry Pi Pico.  <br /></td></tr>
<tr class="separator:a035d5b90329f5b24fa11d208a873884a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a685db95700790d9c4bab49ebb3144218" id="r_a685db95700790d9c4bab49ebb3144218"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a685db95700790d9c4bab49ebb3144218">__enter__</a> (self)</td></tr>
<tr class="memdesc:a685db95700790d9c4bab49ebb3144218"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enter method for context management.  <br /></td></tr>
<tr class="separator:a685db95700790d9c4bab49ebb3144218"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbe19d780aea2633d860459870791e45" id="r_acbe19d780aea2633d860459870791e45"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acbe19d780aea2633d860459870791e45">__exit__</a> (self, excType, excValue, excTraceback)</td></tr>
<tr class="memdesc:acbe19d780aea2633d860459870791e45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exit method for context management.  <br /></td></tr>
<tr class="separator:acbe19d780aea2633d860459870791e45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdab9f225fa002e84a2a6e0d5992448f" id="r_acdab9f225fa002e84a2a6e0d5992448f"><td class="memItemLeft" align="right" valign="top"><a id="acdab9f225fa002e84a2a6e0d5992448f" name="acdab9f225fa002e84a2a6e0d5992448f"></a>
str&#160;</td><td class="memItemRight" valign="bottom"><b>__str__</b> (self)</td></tr>
<tr class="memdesc:acdab9f225fa002e84a2a6e0d5992448f"><td class="mdescLeft">&#160;</td><td class="mdescRight">String representation of this class - returns all settable parameters. <br /></td></tr>
<tr class="separator:acdab9f225fa002e84a2a6e0d5992448f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab84f7ab63354d1fc3680ab9b6cebfcfc" id="r_ab84f7ab63354d1fc3680ab9b6cebfcfc"><td class="memItemLeft" align="right" valign="top"><a id="ab84f7ab63354d1fc3680ab9b6cebfcfc" name="ab84f7ab63354d1fc3680ab9b6cebfcfc"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>close</b> (self)</td></tr>
<tr class="memdesc:ab84f7ab63354d1fc3680ab9b6cebfcfc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close the ADC pin or chip - set this pin or all SPI pins (except for the chipEnable pins) to input (high impedance) without pulling up or down. <br /></td></tr>
<tr class="separator:ab84f7ab63354d1fc3680ab9b6cebfcfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78ffc4bbc722bfb664a614ee130119bb" id="r_a78ffc4bbc722bfb664a614ee130119bb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a78ffc4bbc722bfb664a614ee130119bb">level</a> (self)</td></tr>
<tr class="memdesc:a78ffc4bbc722bfb664a614ee130119bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Works as read property to get the current ADC level of a Pin or ADC chip input as an int.  <br /></td></tr>
<tr class="separator:a78ffc4bbc722bfb664a614ee130119bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a423e8f5e7d08714477633e402487f693" id="r_a423e8f5e7d08714477633e402487f693"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a423e8f5e7d08714477633e402487f693">maxLevel</a> (self)</td></tr>
<tr class="memdesc:a423e8f5e7d08714477633e402487f693"><td class="mdescLeft">&#160;</td><td class="mdescRight">Works as read property to get the maximal value that the level property can return.  <br /></td></tr>
<tr class="separator:a423e8f5e7d08714477633e402487f693"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class to encapsulate analog input capabilities. </p>
<p>To put it upfront, Raspberry Pi models other than the Raspberry Pi Pico do not have analog input capabilities built-in. All the models that don't have this capability must use external Analog-to-Digital-Converter (ADC) hardware to provide it. But since many sensors one might want to connect to a Raspberry Pi provide analog outputs, this class provides a common API for analog input for all Raspberry Pi models, thus allowing the same higher- level code to be used on all Raspberry Pi models without significant modification. The only difference between using an external ADC and the built-in ADC of the Raspberry Pi Pico is that the external ADC channel must be specified where the Pico requires a Pin number or GP(IO) line string. <br  />
 This class uses the gpiozero library for the Raspberry Pis other than the Pico internally, and hence supports all ADC chips supported by gpiozero. On Raspberry Pis without built-in ADC, the supported external ADC chips are MCP3002, MCP3004, MCP3008, MCP3201, MCP3202, MCP3204, MCP3208, MCP3301, MCP3302, or MCP3304. These chips use the SPI protocol to communicate with the Raspberry Pi. They provide a maximal sample rate of about 20 kHz (if the software can keep up) and a resolution of 10, 12 or 13 bits.</p>
<p>The general GPIO SPI pins MOSI (GPIO10), MISO (GPIO9) and SCLK (GPIO11) are used for communication with these ADC chips. The chipEnable parameter is used to specify the SPI chip enable line number using CE0 (GPIO8) and CE1 (GPIO7). These pins must therefore be connected to the appropriate pins on the ADC chip as shown in the following table which uses the MCP3008 as an example for the second column numbers. </p><table border="1">
<caption>Connection of MCP3x0y chips to Raspberry Pi other than Pico &mdash; these chips have 10+x bits resolution and y analog input channels</caption>
<tr>
<th>MCP3x0y Signal </th><th>MCP3008 Pin Number </th><th>RB Pi Line <br  />
 </th><th>RBPi Header Pin Number </th><th>Description  </th></tr>
<tr>
<td>CH&lt;m&gt; (m = 0...y-1) </td><td>&lt;n&gt; (n = 1...8) </td><td>not connected to RB Pi </td><td>not connected to RB Pi </td><td>Analog input channel connected to sensor  </td></tr>
<tr>
<td>DGND </td><td>9 </td><td>GND </td><td>6, 9, 14, 20, 25, 30, 34, or 39 </td><td>Digital ground  </td></tr>
<tr>
<td><span style="text-decoration:overline">CS</span>/SHDN </td><td>10 </td><td>GPIO7/CE1 or GPIO8/CE0 </td><td>24 or 26 </td><td>SPI chip select 0 or 1 / shutdown input 0 or 1  </td></tr>
<tr>
<td>D<sub>IN</sub> </td><td>11 </td><td>GPIO10/MOSI </td><td>19 </td><td>SPI MOSI  </td></tr>
<tr>
<td>D<sub>OUT</sub> </td><td>12 </td><td>GPIO9/MISO </td><td>21 </td><td>SPI MISO  </td></tr>
<tr>
<td>CLK </td><td>13 </td><td>GPIO11/SCLK </td><td>23 </td><td>SPI clock  </td></tr>
<tr>
<td>AGND </td><td>14 </td><td>GND </td><td>6, 9, 14, 20, 25, 30, 34, or 39 </td><td>Analog ground  </td></tr>
<tr>
<td>V<sub>REF</sub> </td><td>15 </td><td>3.3V </td><td>1 or 17 </td><td>3.3 V analog reference voltage  </td></tr>
<tr>
<td>V<sub>DD</sub> </td><td>16 </td><td>3.3V </td><td>1 or 17 </td><td>3.3 V digital supply voltage  </td></tr>
</table>
<p>It is important to note that apart from specifying the intended target ADC chip, the chipEnable is an active signal of the SPI protocol and cannot be static or hard-wired on a particular ADC chip, even if there is only one.</p>
<p>As the Raspberry Pi Pico does not need an external ADC chip, the chipEnable as well as the chip parameter are ignored there.</p>
<p>The voltage levels at the ADC pins are examined via a getter for the level property of this class, i.e. if myDevice is an <a class="el" href="class_g_p_i_o___a_l_1_1_analog_input_1_1_analog_input.html" title="Class to encapsulate analog input capabilities.">AnalogInput</a> object, the statement </p><div class="fragment"><div class="line">value = myDevice.level</div>
</div><!-- fragment --><p> is used to examine the ADC input pin's voltage level as an integer between 0 and myDevice.maxLevel and store it in the variable value. The value of myDevice.maxLevel is dependent on the ADC used, but is always 1023 for 10-bit ADCs (e.g. MCP3002, MCP3004, MCP3008), 4095 for 12-bit ADCs (e.g. MCP3201, MCP3202, MCP3204, MCP3208), and 8191 for 13-bit ADCs (e.g. MCP3301, MCP3302, MCP3304). On the Raspberry Pi Pico, it is always 65535.</p>
<p>CAUTION: Make sure you are only using voltages at any input pins of the ADC, external or built-in, that do not exceed the allowed level for your device. Otherwise, permanent damage to the ADC chip or the Raspberry Pi Pico may occur. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a20868137736d7c6d35126c6d32ed101b" name="a20868137736d7c6d35126c6d32ed101b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20868137736d7c6d35126c6d32ed101b">&#9670;&#160;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GPIO_AL.AnalogInput.AnalogInput.__init__ </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Union[int, str]</td>          <td class="paramname"><span class="paramname"><em>channelOrPin</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[int]</td>          <td class="paramname"><span class="paramname"><em>chipEnable</em></span><span class="paramdefsep"> = </span><span class="paramdefval">0</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[str]</td>          <td class="paramname"><span class="paramname"><em>chip</em></span><span class="paramdefsep"> = </span><span class="paramdefval">'MCP3008'</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor - initializes the class. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channelOrPin</td><td>either ADC integer channel or on the Pico I/O board pin or GP line number. Can be an integer ADC channel number or on the Pico a board pin number or a string of the form GP&lt;m&gt; on the Pico where m represents the line number </td></tr>
    <tr><td class="paramname">chipEnable</td><td>can be either 0 or 1 for the SPI chip enable (defaults to 0 - ignored on the Pico) </td></tr>
    <tr><td class="paramname">chip</td><td>can be 'MCP3002', 'MCP3004', 'MCP3008', 'MCP3201', 'MCP3202', 'MCP3204', 'MCP3208', 'MCP3301', 'MCP3302', or 'MCP3304' (defaults to 'MCP3008' - ignored on the Pico) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a035d5b90329f5b24fa11d208a873884a" name="a035d5b90329f5b24fa11d208a873884a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a035d5b90329f5b24fa11d208a873884a">&#9670;&#160;</a></span>__del__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GPIO_AL.AnalogInput.AnalogInput.__del__ </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destructor - only meaningful on the Raspberry Pi and potentially during Unit Tests on the Raspberry Pi Pico. </p>
<p>Only gets called when the garbage collector decides to call it, which may be never.</p>
<p>Closes the pin and terminates the event loop thread if running. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a685db95700790d9c4bab49ebb3144218" name="a685db95700790d9c4bab49ebb3144218"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a685db95700790d9c4bab49ebb3144218">&#9670;&#160;</a></span>__enter__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GPIO_AL.AnalogInput.AnalogInput.__enter__ </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enter method for context management. </p>
<dl class="section return"><dt>Returns</dt><dd>an object that is used in the "as" construct, here it is self </dd></dl>

</div>
</div>
<a id="acbe19d780aea2633d860459870791e45" name="acbe19d780aea2633d860459870791e45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbe19d780aea2633d860459870791e45">&#9670;&#160;</a></span>__exit__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GPIO_AL.AnalogInput.AnalogInput.__exit__ </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>excType</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>excValue</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>excTraceback</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Exit method for context management. </p>
<p>Closes the pin. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">excType</td><td>type of exception ending the context </td></tr>
    <tr><td class="paramname">excValue</td><td>value of the exception ending the context </td></tr>
    <tr><td class="paramname">excTraceback</td><td>traceback of exception ending the context </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>False (will re-raise the exception) </dd></dl>

</div>
</div>
<a id="a78ffc4bbc722bfb664a614ee130119bb" name="a78ffc4bbc722bfb664a614ee130119bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78ffc4bbc722bfb664a614ee130119bb">&#9670;&#160;</a></span>level()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> int GPIO_AL.AnalogInput.AnalogInput.level </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Works as read property to get the current ADC level of a Pin or ADC chip input as an int. </p>
<dl class="section return"><dt>Returns</dt><dd>int between 0 and maxLevel representing the ADC level </dd></dl>

</div>
</div>
<a id="a423e8f5e7d08714477633e402487f693" name="a423e8f5e7d08714477633e402487f693"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a423e8f5e7d08714477633e402487f693">&#9670;&#160;</a></span>maxLevel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> int GPIO_AL.AnalogInput.AnalogInput.maxLevel </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Works as read property to get the maximal value that the level property can return. </p>
<dl class="section return"><dt>Returns</dt><dd>maximal value the level property can return as an int </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="_analog_input_8py.html">AnalogInput.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
